<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>診察</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="../portal/js/jquery.min.js"></script>
    <script src="../portal/js/common.js"></script>
</head>
<body>
<h1 class="main-title">My Clinic : 診察</h1>
<div class="main-container">
    <aside class="sidebar">
        <ul></ul>
    </aside>
    <div class="main"></div>
</div>
<script>
    (async function () {
        let {Index} = await import("./index");
        let rest = new Rest("../json");

        // for dev fax
        // devFax(rest);

        let sidebarUl = document.querySelector(".main-container .sidebar ul");
        let main = document.querySelector(".main-container .main");
        let index = new Index(rest, sidebarUl, main);
        await index.init();
    })();

    function devFax(rest){
        rest.sendFax = async (faxNumber, pdfFile) => {
            let r = Math.random() * 1000000;
            return Math.floor(r);
        };
        rest.pollFax = async faxSid => {
            let r = Math.random();
            if( r < 0.1 ){
                return "busy";
            }
            if( r < 0.2 ){
                return "no answer";
            }
            if( r < 0.3 ){
                return "delivered";
            }
            return "sending";
        };
    }
</script>
</body>
</html>